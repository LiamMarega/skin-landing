---
interface Props extends astroHTML.JSX.ButtonHTMLAttributes {
    title?: string;
    highlight?: string;
}

const {
    title = "Let's get started",
    highlight,
    class: className,
    ...rest
} = Astro.props;
---

<div class="relative group inline-block cursor-pointer">
    <!-- Outer Glow -->
    <div
        class="cursor-pointer absolute -inset-1 bg-accent/20 rounded-2xl blur-lg opacity-0 group-hover:opacity-100 transition-opacity duration-500 animate-pulse pointer-events-none"
    >
    </div>

    <button
        {...rest}
        class:list={[
            "relative cursor-pointer overflow-hidden group/btn px-10 py-5 bg-accent/20 border border-white/10 rounded-2xl transition-all duration-500 hover:border-accent/50 hover:scale-[1.02] active:scale-95 shadow-[0_0_20px_rgba(0,0,0,0.8)]",
            className,
        ]}
    >
        <!-- Border Gradient -->
        <div
            class="absolute inset-0 p-px rounded-2xl bg-linear-to-br from-white/20 via-transparent to-white/5 opacity-100 group-hover/btn:from-accent/50 group-hover/btn:to-accent/70 transition-colors duration-500"
        >
            <div class="absolute inset-0 bg-stone-900 rounded-2xl"></div>
        </div>

        <!-- Reflective Shine Effect -->
        <div
            class="absolute inset-0 -translate-x-full group-hover/btn:translate-x-full transition-transform duration-1000 ease-in-out pointer-events-none bg-linear-to-r from-transparent via-white/10 to-transparent skew-x-[-25deg]"
        >
        </div>

        <div class="relative z-10 flex items-center gap-3">
            <span
                class="text-white font-black tracking-tight uppercase transition-colors duration-300 group-hover/btn:text-accent/90"
            >
                {
                    highlight
                        ? title
                              .split(new RegExp(`(${highlight})`, "gi"))
                              .map((part) =>
                                  part.toLowerCase() ===
                                  highlight.toLowerCase() ? (
                                      <span class="text-accent">{part}</span>
                                  ) : (
                                      part
                                  ),
                              )
                        : title
                }
            </span>

            <div class="relative">
                <svg
                    class="w-5 h-5 text-accent transition-all duration-500 group-hover/btn:translate-x-1 group-hover/btn:scale-110"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="3"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"></path>
                </svg>

                <!-- Tiny glow behind arrow -->
                <div
                    class="absolute inset-0 bg-accent/40 blur-md opacity-0 group-hover/btn:opacity-100 transition-opacity duration-500"
                >
                </div>
            </div>
        </div>

        <!-- Inner texture/noise subtle overlay -->
        <div
            class="absolute inset-0 opacity-[0.03] pointer-events-none"
            style="background-image: url('data:image/svg+xml,%3Csvg viewBox=%270 0 200 200%27 xmlns=%27http://www.w3.org/2000/svg%27%3E%3Cfilter id=%27n%27%3E%3CfeTurbulence type=%27fractalNoise%27 baseFrequency=%270.65%27 numOctaves=%273%27 stitchTiles=%27stitch%27/%3E%3C/filter%3E%3Crect width=%27100%25%27 height=%27100%25%27 filter=%27url(%23n)%27/%3E%3C/svg%3E');"
        >
        </div>
    </button>
</div>

<style>
    /* Custom font fallback if needed, but using Tailwind black font for impact */
    button {
        font-family: "Poppins", sans-serif;
        letter-spacing: -0.02em;
    }
</style>
