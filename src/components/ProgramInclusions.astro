---
import { Image } from 'astro:assets';
import InteractiveStack from './InteractiveStack';

import spray01 from '../assets/resources/spray/spray_01.webp';
import spray02 from '../assets/resources/spray/spray_02.webp';
import texture02 from '../assets/resources/textures/texture_02.webp';

const inclusions = [
    {
        name: "Photoshop PRO para redes (Flujo real + Export)",
        price: "79 USD",
        bold: "Photoshop PRO",
    },
    {
        name: "Masterclass: Sombras, luces y profundidad realista",
        price: "49 USD",
        bold: "Sombras, luces y profundidad",
    },
    {
        name: "Fundamentos: Tipograf√≠a, jerarqu√≠a y composici√≥n",
        price: "69 USD",
        bold: "jerarqu√≠a y composici√≥n",
    },
    {
        name: "Sistema de dise√±o semanal (M√©todo anti-bloqueo)",
        price: "59 USD",
        bold: "Sistema de dise√±o",
    },
    {
        name: "Blindaje de Portfolio (Armado + Selecci√≥n)",
        price: "79 USD",
        bold: "Blindaje de Portfolio",
    },
    {
        name: "Estructuraci√≥n de Oferta y Pack de Servicios",
        price: "99 USD",
        bold: "Estructuraci√≥n de Oferta",
    },
    {
        name: "Desarrollo de Marca Personal para Dise√±adores",
        price: "79 USD",
        bold: "Marca Personal",
    },
    {
        name: "Estrategia de Ventas (DMs + Propuestas + Cierre)",
        price: "89 USD",
        bold: "Estrategia de Ventas",
    },
    {
        name: "Acceso a Biblioteca de Recursos / Toolkit",
        price: "49 USD",
        bold: "Biblioteca de Recursos",
    },
    {
        name: "Acceso de por vida a Grabaciones y Comunidad",
        price: "59 USD",
        bold: "Grabaciones y Comunidad",
    },
];

const totalValue = 710;
const accentColor = "var(--accent)";
---

<section
    class="py-20 relative overflow-hidden flex items-center justify-center min-h-0 bg-black"
    style="font-family: 'Aniko', sans-serif; mask-image: linear-gradient(to bottom, transparent 0%, black 10%, black 90%, transparent 100%); -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 10%, black 90%, transparent 100%);"
>
    <!-- Background Elements -->
    <div class="absolute inset-0 bg-[#050505]">
        <div class="absolute top-0 left-0 w-full h-[500px] bg-linear-to-b from-[#000e51]/20 to-transparent pointer-events-none"></div>
        <!-- Noise Texture -->
        <div
            class="absolute inset-0 opacity-[0.03] pointer-events-none mix-blend-overlay"
            style="background-image: url('data:image/svg+xml,%3Csvg viewBox=\'0 0 200 200\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cfilter id=\'noiseFilter\'%3E%3CfeTurbulence type=\'fractalNoise\' baseFrequency=\'0.65\' numOctaves=\'3\' stitchTiles=\'stitch\'/%3E%3C/filter%3E%3Crect width=\'100%25\' height=\'100%25\' filter=\'url(%23noiseFilter)\'/%3E%3C/svg%3E');"
        >
        </div>
    </div>
    
    <!-- Spray Paint Assets (Synced with PricingCard) -->
    <Image
        src={spray01}
        alt=""
        loading="lazy"
        decoding="async"
        class="absolute top-0 -left-20 w-96 opacity-40 -z-10 pointer-events-none"
    />
    <Image
        src={spray02}
        alt=""
        loading="lazy"
        decoding="async"
        class="absolute bottom-0 -right-20 w-96 opacity-40 -z-10 pointer-events-none"
    />

    <div class="container mx-auto px-4 relative z-10 flex items-center justify-center min-h-0 h-full">
        <!-- Main Card Container: Compact & Dense -->
        <div
            class="max-w-screen w-full mx-auto border border-white/10 bg-[#080808] relative shadow-[0_50px_100px_-20px_rgba(0,0,0,0.7)] flex flex-col lg:flex-row overflow-hidden"
        >
             <!-- Texture & Noise on Card -->
             <div class="absolute inset-0 opacity-10 mix-blend-overlay pointer-events-none bg-cover" style={`background-image: url('${texture02.src}');`}></div>
             
             <!-- LEFT PANEL: Visual Impact (35% Width) -->
            <div class="relative lg:w-[35%] min-h-[300px] lg:min-h-full bg-[#0a0a0a] border-r border-white/5 flex items-center justify-center overflow-hidden group">
                <!-- Background Gradients -->
                <div class="absolute inset-0 bg-linear-to-b from-blue-900/10 to-transparent"></div>
                
                <!-- Animated 3D Stack (React Component) -->
                <div class="relative transform scale-75 lg:scale-90">
                     <InteractiveStack client:visible />
                </div>

                <!-- Bottom Label -->
                <div class="absolute bottom-6 left-6 right-6 z-20">
                    <div class="flex justify-between items-end border-b border-white/10 pb-2">
                         <span class="text-zinc-600 text-[10px] font-mono tracking-widest">ID: PRO-BUNDLE</span>
                         <span class="text-accent text-[10px] font-black uppercase tracking-widest">Verified ‚úì</span>
                    </div>
                </div>
            </div>

            <!-- RIGHT PANEL: Spec Sheet / Grid (65% Width) -->
            <div class="relative lg:w-[65%] p-6 lg:p-8 flex flex-col justify-center bg-[#080808]">
                <!-- Header -->
                <div class="flex flex-col md:flex-row md:items-end justify-between gap-4 mb-6 border-b border-white/5 pb-4">
                    <div>
                        <h2 class=" md:text-3xl font-black italic text-white tracking-tighter uppercase leading-none">
                            <span class="text-accent">RECORDA</span> LO QUE INCLUYE
                        </h2>
                        <p class="text-zinc-500 text-xs md:text-sm font-medium mt-1 max-w-md">
                            Arsenal completo de dise√±o y estrategia profesional.
                        </p>
                    </div>
                    <div class="text-right hidden md:block">
                        <div class="px-2 py-1 bg-white/5 rounded border border-white/10 inline-block">
                             <span class="text-[10px] text-zinc-400 font-mono uppercase">Total Items: {inclusions.length}</span>
                        </div>
                    </div>
                </div>

                <!-- COMPACT GRID LAYOUT -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-6">
                    {
                        inclusions.map((item, index) => (
                            <div class="group relative bg-white/2 border border-white/5 hover:border-accent/30 hover:bg-white/4 transition-all duration-300 rounded p-2.5 flex items-center gap-3">
                                <!-- Index Number (Technical look) -->
                                <span class="text-[10px] font-mono text-zinc-600 group-hover:text-accent transition-colors w-5 text-right">
                                    {(index + 1).toString().padStart(2, '0')}
                                </span>
                                
                                <div class="grow min-w-0">
                                    <p class="text-[11px] sm:text-xs font-bold text-zinc-400 uppercase leading-snug truncate group-hover:text-white transition-colors"
                                       title={item.name.replace(/<[^>]*>?/gm, '')}
                                       set:html={item.name.replace(
                                           item.bold,
                                           `<span class="text-white font-extrabold">${item.bold}</span>`
                                       )}
                                    />
                                </div>
                                
                                <div class="flex flex-col items-end shrink-0 pl-2 border-l border-white/5">
                                    <span class="text-accent text-xs font-black tracking-tight">{item.price}</span>
                                </div>

                                <!-- Corner Accent on Hover -->
                                <div class="absolute top-0 right-0 w-1.5 h-1.5 border-t border-r border-accent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                                <div class="absolute bottom-0 left-0 w-1.5 h-1.5 border-b border-l border-accent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            </div>
                        ))
                    }
                </div>

                <!-- Footer / Total Value -->
                <div class="flex items-center justify-between pt-4 border-t border-white/5">
                     <div class="hidden sm:flex items-center gap-3">
                         <div class="w-8 h-8 rounded bg-zinc-900 border border-white/10 flex items-center justify-center">
                             <span class="text-base">üéÅ</span>
                         </div>
                         <div class="flex flex-col">
                             <span class="text-[10px] text-zinc-500 uppercase tracking-widest">Bonus Incluido</span>
                             <span class="text-[11px] text-white font-bold">Pack Recursos + Comunidad</span>
                         </div>
                     </div>

                     <div class="text-right ml-auto">
                         <p class="text-[10px] text-zinc-500 uppercase tracking-widest mb-0.5">Valor Real Total</p>
                         <div class="flex items-baseline justify-end gap-2">
                             <span class="text-xl md:text-3xl text-zinc-600 line-through decoration-white/20 decoration-2 italic font-black">${totalValue} USD</span>
                         </div>
                     </div>
                </div>
            </div>
        </div>
    </div>
</section>

<style>
    .perspective-[1000px] {
        perspective: 1000px;
    }

    @keyframes shine {
        0% { left: -100%; }
        100% { left: 200%; }
    }
    
    .animate-shine {
        animation: shine 6s infinite linear;
    }
</style>
